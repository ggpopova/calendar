(function(){const h=document.createElement("link").relList;if(h&&h.supports&&h.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))D(t);new MutationObserver(t=>{for(const a of t)if(a.type==="childList")for(const b of a.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&D(b)}).observe(document,{childList:!0,subtree:!0});function f(t){const a={};return t.integrity&&(a.integrity=t.integrity),t.referrerPolicy&&(a.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?a.credentials="include":t.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function D(t){if(t.ep)return;t.ep=!0;const a=f(t);fetch(t.href,a)}})();function R(_){const h=document.getElementById("month-year"),f=document.getElementById("calendar-days"),D=document.getElementById("prev-btn"),t=document.getElementById("next-btn");if(!h||!f||!D||!t){console.error("Required calendar elements are missing");return}const a=["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"];let b=new Date,l=null,g=null;const E=()=>{const n=b.getFullYear(),s=b.getMonth();h.textContent=`${a[s]} ${n}`;const S=(new Date(n,s).getDay()+6)%7,w=32-new Date(n,s,32).getDate(),$=32-new Date(n,s-1,32).getDate();f.innerHTML="";for(let e=S;e>0;e--){const m=$-e+1,r=s===0?11:s-1,o=s===0?n-1:n,i=new Date(o,r,m);let p=!1,v=!1,u=!1,c=!1;if(l)if(!g)c=i.getTime()===l.getTime();else{const d=new Date(l),y=new Date(g),T=d<y?d:y,k=d<y?y:d;p=i>=T&&i<=k,v=i.getTime()===T.getTime(),u=i.getTime()===k.getTime()}f.innerHTML+=`<button type="button" class="selected--opacity ${p?"selected":""} ${v?"range-start":""} ${u?"range-end":""} ${c?"single-selected":""}" data-day="${m}" data-month="${r}" data-year="${o}" aria-label="Выбрать ${m} ${a[r]} ${o}">${m}</button>`}for(let e=1;e<=w;e++){const m=e===new Date().getDate()&&s===new Date().getMonth()&&n===new Date().getFullYear(),r=new Date(n,s,e);let o=!1,i=!1,p=!1,v=!1;if(l)if(!g)v=r.getTime()===l.getTime();else{const u=new Date(l),c=new Date(g),d=u<c?u:c,y=u<c?c:u;o=r>=d&&r<=y,i=r.getTime()===d.getTime(),p=r.getTime()===y.getTime()}f.innerHTML+=`<button type="button" class="${m?"today":""} ${o?"selected":""} ${i?"range-start":""} ${p?"range-end":""} ${v?"single-selected":""}" data-day="${e}" data-month="${s}" data-year="${n}" aria-label="Выбрать ${e} ${a[s]} ${n}">${e}</button>`}const I=S+w,x=Math.ceil(I/7)*7-I;for(let e=1;e<=x;e++){const m=s===11?0:s+1,r=s===11?n+1:n,o=new Date(r,m,e);let i=!1,p=!1,v=!1,u=!1;if(l)if(!g)u=o.getTime()===l.getTime();else{const c=new Date(l),d=new Date(g),y=c<d?c:d,T=c<d?d:c;i=o>=y&&o<=T,p=o.getTime()===y.getTime(),v=o.getTime()===T.getTime()}f.innerHTML+=`<button type="button" class="selected--opacity ${i?"selected":""} ${p?"range-start":""} ${v?"range-end":""} ${u?"single-selected":""}" data-day="${e}" data-month="${m}" data-year="${r}" aria-label="Выбрать ${e} ${a[m]} ${r}">${e}</button>`}f.querySelectorAll("button").forEach(e=>{e.removeEventListener("click",L),e.addEventListener("click",L)})},L=n=>{const s=parseInt(n.target.getAttribute("data-day")),S=parseInt(n.target.getAttribute("data-month")),w=parseInt(n.target.getAttribute("data-year")),$=new Date(w,S,s);l?g?(l=$,g=null):g=$:(l=$,g=null),E()},M=n=>{b.setMonth(b.getMonth()+n),E()};D.addEventListener("click",()=>M(-1)),t.addEventListener("click",()=>M(1)),E()}function q(){const _=document.querySelector(".theme-toggle");if(!_)return;function h(){document.body.classList.toggle("dark"),document.body.classList.contains("dark")?localStorage.setItem("theme","dark"):localStorage.setItem("theme","light")}_.addEventListener("click",h),localStorage.getItem("theme")==="dark"?document.body.classList.add("dark"):document.body.classList.remove("dark")}document.querySelector("#app").innerHTML=`
  <div>
    <h1 class="visually-hidden">«Альпака календарь»</h1>
    <div class="container">
      <button class="theme-toggle">Переключить тему</button>
      <div class="calendar">
        <div class="calendar__header">
          <h2 class="calendar__month" id="month-year"></h2>
          <div class="calendar__btns">
            <button type="button"  class="calendar__btn calendar__btn--prev" id="prev-btn">
              <img src="./arrow-btn.svg" class="calendar__btn-img calendar__btn-img-prev" width="8" height="12" alt="Стрелка назад" />
            </button>
            <button type="button"  class="calendar__btn calendar__btn--next" id="next-btn">
              <img src="./arrow-btn.svg" class="class="calendar__btn-img calendar__btn-img-next" width="8" height="12" alt="Стрелка назад" />
            </button>
          </div>
        </div>
        <div class="calendar__body">
          <div class="calendar__days" id="calendar-days"></div>
        </div>
      </div>
  </div>
`;R(document.querySelector("#calendar"));q(document.querySelector("#theme-toggle"));
